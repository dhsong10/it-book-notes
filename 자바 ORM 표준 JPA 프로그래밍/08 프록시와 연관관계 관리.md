## 08 프록시와 연관관계 관리

### 즉시 로딩과 지연 로딩

객체 그래프 탐색에서 연관된 객체를 가져오는 방법으로 즉시 로딩과 지연 로딩이 있다.

즉시 로딩(`FetchType.EAGER`)은 객체를 데이터베이스에서 가져올 때 연관된 객체까지 가져온다. 연관된 객체를 효율적으로 가져오기 위해서 내부적으로 `JOIN` 쿼리를 사용한다.
지연 로딩(`FetchType.LAZY`)는 객체를 데이터베이스에서 가져올 때 연관된 객체의 프록시를 가져온다. 실제 객체는 그 객체를 실제로 사용할 때 데이터베이스에서 조회한다.

지연 로딩을 사용하는 것을 권장한다. 즉시 로딩은 사용할 필요가 없는 객체까지 데이터베이스에서 조회하기 때문에 비효율적이다. 따라서 애플리케이션을 개발할 때에는 지연 로딩으로 개발하고, 자주 같이 조회되는 객체들에 대해서만 즉시 로딩으로 바꾸는 것을 고려하는 것이 좋다.

### 영속성 전이

JPA에서 엔티티를 저장할 때 연관된 모든 엔티티는 영속 상태여야 한다. 영속성 관리는 하나의 엔티티를 영속화할 때 연관된 엔티티도 같이 영속화하는 편리함을 제공한다. `casecade` 속성에서 영속성 전이의 범위를 설정할 수 있다.
